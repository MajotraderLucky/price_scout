# Price Scout - Исследование API и источников данных

## Дата исследования: 2025-12-30

---

## 1. Маркетплейсы - Официальные API

### Avito API

| Параметр            | Значение                                              |
|---------------------|-------------------------------------------------------|
| Документация        | https://developers.avito.ru/api-catalog               |
| Формат              | Swagger 3.0, REST JSON                                |
| Авторизация         | OAuth 2.0 (client_credentials)                        |
| Требования          | Платный тариф Avito, client_id + client_secret        |

**Доступные методы:**

| Метод               | Описание                                    | Для кого          |
|---------------------|---------------------------------------------|-------------------|
| getItemInfo         | Информация об объявлении (статус, услуги)   | Только свои       |
| getItemsStats       | Статистика просмотров объявлений            | Только свои       |
| getVasPrices        | Стоимость услуг продвижения                 | Только свои       |
| Messenger API       | Чаты по объявлениям                         | Только свои       |

**Вывод:** [X] Не подходит - API только для управления своими объявлениями, не для мониторинга чужих цен.

---

### Яндекс Маркет API

| Параметр            | Значение                                     |
|---------------------|----------------------------------------------|
| Документация        | https://yandex.ru/dev/market/partner-api/    |
| Тип                 | Partner API (для продавцов)                  |
| Доступ              | Бесплатный для продавцов                     |

**Особенности:**
- API предназначен для продавцов (управление товарами, ценами, заказами)
- Метод getSuggestedPrices возвращает рекомендованные цены для продвижения
- BUYBOX - самая низкая цена на товар в реальном времени
- MIN_PRICE_MARKET - минимальная цена на Маркете во всех регионах

**Вывод:** [X] Не подходит напрямую - API для продавцов, не для покупателей.

---

### Wildberries / Ozon

| Маркетплейс | Официальный API для покупателей | Парсинг         |
|-------------|---------------------------------|-----------------|
| Wildberries | [X] Нет                         | Сложный         |
| Ozon        | [X] Нет                         | Средний         |

**Вывод:** Нет публичных API для получения цен. Требуется парсинг.

---

## 2. SERP API (поисковые сервисы)

### SerpApi (Google Shopping)

| Параметр           | Значение                                          |
|--------------------|---------------------------------------------------|
| Сайт               | https://serpapi.com/google-shopping-api           |
| Free tier          | 100 запросов/месяц бесплатно                      |
| Платные планы      | от $75/мес (5000 запросов)                        |
| Pay-as-you-go      | $0.01 за запрос                                   |
| Кэширование        | 1 час (кэшированные запросы бесплатны)            |
| Сортировка по цене | [+] Встроена (параметр sort=1 или sort=2)         |

**Пример запроса:**
```
GET /search?engine=google_shopping&q=Samsung+Galaxy+S24&sort=1
```

**Вывод:** [?] Платный, но хороший вариант для международного охвата.

---

### Яндекс Search API

| Параметр           | Значение                                     |
|--------------------|----------------------------------------------|
| Сайт               | https://yandex.cloud/ru/services/search-api  |
| Официальная цена   | 480 руб/1000 запросов (день)                 |
| Через посредников  | ~18 руб/1000 запросов                        |
| Товарные блоки     | Ограниченно (XML не показывает)              |

**Вывод:** [X] Дорого, XML не возвращает товарные карточки с ценами.

---

## 3. Ценовые агрегаторы

### E-katalog.ru (Рекомендуется)

| Параметр              | Значение                                           |
|-----------------------|----------------------------------------------------|
| Тип                   | Веб-сервис с полным интерфейсом                    |
| База товаров          | 20+ млн товаров                                    |
| Охват магазинов       | Сотни интернет-магазинов РФ                        |
| Публичный API         | [X] Нет                                            |
| Возможность парсинга  | [+] Да (Selenium/Playwright)                       |
| Скрытое API           | [?] Требует исследования через DevTools            |

**Данные на сайте:**
- Поиск по названию товара
- Список магазинов с ценами
- История изменения цен
- Характеристики товаров
- Отзывы

**URL паттерны:**

| Страница            | URL паттерн                            |
|---------------------|----------------------------------------|
| Поиск               | `/ek-list.php?search_=<query>`         |
| Карточка товара     | `/<product-slug>.htm`                  |
| Цены в магазинах    | На странице товара (вкладка)           |

**Вывод:** [+] Лучший вариант для MVP - один источник, все магазины.

---

### Cheaper.ru

| Параметр              | Значение                                           |
|-----------------------|----------------------------------------------------|
| Тип                   | Мобильное приложение (iOS, Android, RuStore)       |
| Веб-версия            | Только лендинг, поиска на сайте НЕТ                |
| Охват                 | 47 магазинов из ТОП-100 ecommerce РФ               |
| Скорость              | 2-4 минуты на полный поиск                         |
| API                   | [X] Нет публичного                                 |
| Парсинг               | [X] Невозможен (нет веб-интерфейса)                |

**Вывод:** [X] Не подходит - закрытое мобильное приложение.

---

### Price.ru / Sravni.com

| Агрегатор  | Тип               | API  | Парсинг |
|------------|-------------------|------|---------|
| Price.ru   | Веб-сервис        | [X]  | [+]     |
| Sravni.com | Финансовый сервис | [X]  | [-]     |

**Примечание:** Sravni.com специализируется на финансовых продуктах (ОСАГО, кредиты), не на товарах.

---

## 4. Open Source парсеры

### Готовые решения на GitHub

| Проект                  | Маркетплейсы            | Технологии            | Ссылка                                                |
|-------------------------|-------------------------|-----------------------|-------------------------------------------------------|
| ParserWbOzYa            | WB, Ozon, Яндекс.Маркет | Python + Selenium     | github.com/Dub2402/ParserWbOzYa                       |
| google-shopping-scraper | Google Shopping         | Python + Selenium     | github.com/bhuiyanmobasshir94/google-shopping-scraper |
| AutoScraper             | Любой сайт              | Python (умный парсер) | github.com/alirezamika/autoscraper                    |
| Crawl4AI                | Любой сайт              | Python + Playwright   | github.com/unclecode/crawl4ai                         |

---

## 5. Итоговое сравнение

| Источник           | Бесплатно | Охват      | Сложность | Рекомендация    |
|--------------------|-----------|------------|-----------|-----------------|
| E-katalog.ru       | [+]       | Все РФ     | Средняя   | [+] MVP         |
| SerpApi            | 100/мес   | Мир        | Низкая    | [?] Позже       |
| ParserWbOzYa       | [+]       | WB+Ozon+YM | Низкая    | [?] Фаза 3      |
| Прямой парсинг WB  | [+]       | WB         | Высокая   | [X] Не MVP      |
| Avito API          | [-]       | Avito      | Средняя   | [X] Не подходит |

---

## 6. Рекомендация для MVP

**Выбор: E-katalog.ru**

Причины:
1. Один источник = все магазины (WB, Ozon, DNS, М.Видео и др.)
2. Бесплатный парсинг
3. Веб-интерфейс доступен для парсинга
4. Есть история цен
5. Возможен поиск скрытого API через DevTools

**Следующие шаги:**
1. Исследовать структуру E-katalog через DevTools
2. Найти скрытое API (если есть)
3. Определить CSS-селекторы для парсинга
4. Создать прототип парсера

---

## Источники

- https://developers.avito.ru/api-catalog
- https://yandex.ru/dev/market/partner-api/
- https://serpapi.com/google-shopping-api
- https://habr.com/ru/articles/680320/ (Поиск скрытого API)
- https://habr.com/ru/articles/742350/ (Cheaper.ru)
- https://github.com/Dub2402/ParserWbOzYa
