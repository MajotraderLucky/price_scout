# Price Scout - Roadmap

## Обзор проекта

**Price Scout** ("Разведчик цен") - Telegram-бот для мониторинга и сравнения цен на товары через парсинг ценовых агрегаторов.

**Ключевое решение:** Вместо парсинга каждого маркетплейса отдельно, используем агрегатор E-katalog, который уже собирает цены из сотен магазинов.

---

## Фазы развития

### Фаза 1: MVP (Минимальный жизнеспособный продукт)

**Цель:** Базовый функционал поиска и сравнения цен через Telegram-бот

| Компонент            | Описание                                              | Статус    |
|----------------------|-------------------------------------------------------|-----------|
| Парсер E-katalog     | Поиск товаров, получение цен из разных магазинов      | [_] TODO  |
| Telegram-бот         | Поиск товаров, просмотр цен, добавление в избранное   | [_] TODO  |
| База данных          | PostgreSQL для хранения товаров и истории цен         | [_] TODO  |
| Кэширование          | Redis для кэша результатов поиска (1 час)             | [_] TODO  |

**Результат:** Работающий Telegram-бот для поиска и сравнения цен

---

### Фаза 2: Отслеживание и уведомления

**Цель:** Автоматический мониторинг цен и уведомления

| Компонент            | Описание                                              | Статус    |
|----------------------|-------------------------------------------------------|-----------|
| Планировщик          | Периодическая проверка цен (каждые 6 часов)           | [_] TODO  |
| Уведомления          | Alert при снижении цены или достижении целевой        | [_] TODO  |
| История цен          | Сохранение и отображение истории изменений            | [_] TODO  |
| Избранное            | Список отслеживаемых товаров пользователя             | [_] TODO  |

---

### Фаза 3: Расширение источников

**Цель:** Дополнительные источники + аналитика

| Компонент            | Описание                                              | Статус    |
|----------------------|-------------------------------------------------------|-----------|
| Прямой парсинг WB    | Парсинг Wildberries (для большей актуальности)        | [_] TODO  |
| Прямой парсинг Ozon  | Парсинг Ozon напрямую                                 | [_] TODO  |
| Графики цен          | Визуализация истории цен                              | [_] TODO  |
| Статистика           | Мин/макс/средняя цена, тренды                         | [_] TODO  |

---

### Фаза 4: Умные функции

**Цель:** ML-прогнозирование + рекомендации

| Компонент            | Описание                                              | Статус    |
|----------------------|-------------------------------------------------------|-----------|
| ML прогноз цены      | Предсказание падения цены на основе истории           | [_] TODO  |
| Умные уведомления    | Рекомендация "сейчас лучшее время для покупки"        | [_] TODO  |
| Поиск аналогов       | Предложение похожих товаров дешевле                   | [_] TODO  |

---

## Архитектура системы (MVP)

```
+------------------+
| Telegram Bot |
| (teloxide)   |
+--------+---------+
         |
+--------v---------+
| Core Service |
| (Axum)       |
+--------+---------+
         |
    +----+----+
|---------|
+---v---+ +---v---+
| Parser  |   | Cache |
| Service |   | Redis |
+---+---+ +-------+
    |
+---v-----------+
| E-katalog.ru |
| (Playwright/ |
| Hidden API)  |
+---------------+

+------------------+
| PostgreSQL      |
| - users         |
| - products      |
| - price_history |
| - trackings     |
+------------------+
```

---

## Приоритеты MVP

### Must Have (обязательно)

- [_] Парсер E-katalog (поиск, цены, магазины)
- [_] Telegram-бот с командами /search, /track, /list
- [_] Хранение результатов поиска в PostgreSQL
- [_] Базовое кэширование результатов (Redis, 1 час)

### Should Have (желательно)

- [_] Сохранение товаров в избранное
- [_] История поисков пользователя
- [_] Inline-режим бота для быстрого поиска

### Could Have (можно добавить позже)

- [_] Периодическая проверка цен (планировщик)
- [_] Уведомления о снижении цены
- [_] Графики истории цен

### Won't Have (не в MVP)

- [X] ML прогнозирование
- [X] Web-интерфейс
- [X] Прямой парсинг маркетплейсов (WB, Ozon)
- [X] Платные тарифы

---

## Команды Telegram-бота (MVP)

| Команда              | Описание                                   |
|----------------------|--------------------------------------------|
| /start               | Приветствие и краткая справка              |
| /search <query>      | Поиск товара по названию                   |
| /prices <id>         | Показать цены на товар в разных магазинах  |
| /track <id>          | Добавить товар в отслеживание              |
| /list                | Список отслеживаемых товаров               |
| /remove <id>         | Удалить товар из отслеживания              |
| /help                | Справка по командам                        |

---

## Пример использования

```
Пользователь: /search Samsung Galaxy S24

Бот: Найдено 15 предложений для "Samsung Galaxy S24":

1. Samsung Galaxy S24 128GB
   Мин. цена: 74 990 руб (DNS)
   Макс. цена: 89 990 руб (М.Видео)
   Магазинов: 12
   [Подробнее] [Отслеживать]

2. Samsung Galaxy S24 256GB
   Мин. цена: 84 990 руб (Ozon)
   ...
```
